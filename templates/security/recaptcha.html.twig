{% if helper.get('configuration').getParameter('recaptchaEnable') %}
    <script src="https://www.google.com/recaptcha/api.js?render={{ helper.get('configuration').getParameter('recaptchaSiteKey') }}"></script>
    <script>
        $(document).ready(function () {
            if ($('.recaptcha-token').length) {
                let action = $(this).data('action');
                grecaptcha.ready(function() {
                    grecaptcha.execute('{{ helper.get('configuration').getParameter('recaptchaSiteKey') }}', {action: action}).then(function(token) {
                        $('.recaptcha-token').val(token);
                    });
                });
            }
        });
    </script>
{% endif %}